{% extends 'base.html' %}
{% block content %}
    
<p>
    <a
      class="btn btn-primary float-right"
      href="/logout"
      role="button"
      style="margin-right: 10px"
      >退出</a>
    <!--
    <a
      class="btn btn-primary float-right"
      href="/useradd"
      role="button"
      style="margin-right: 10px"
      >添加用户</a>
    -->
     <a
      class="btn btn-primary float-right"
      href="/help"
      role="button"
      style="margin-right: 10px"
      >Vpn客户端配置手册</a>
  </p>

  <br />
  <br />
  <br />
  <center>
    <p>
      <a
        class="btn btn-primary"
        data-toggle="collapse"
        href="#multiCollapseExample1"
        role="button"
        aria-expanded="false"
        aria-controls="multiCollapseExample1"
        >当前在线</a
      >
      <button
        class="btn btn-primary"
        type="button"
        data-toggle="collapse"
        data-target="#multiCollapseExample2"
        aria-expanded="false"
        aria-controls="multiCollapseExample2"
      >
       连接日志
      </button>
      <button
        class="btn btn-primary"
        type="button"
        data-toggle="collapse"
        data-target=".multi-collapse"
        aria-expanded="false"
        aria-controls="multiCollapseExample1 multiCollapseExample2"
      >
        隐藏
      </button>
    </p>
  </center>
  <div class="container-sm">
    <div class="collapse multi-collapse" id="multiCollapseExample1">
      <div class="card card-body">
         <table class="table table-striped">
            <thead class="thead-dark">
              <tr>
                <!--
                <th scope="col">user_id</th>
                <th scope="col">user_online</th>
                <th scope="col">user_enable</th>
                <th scope="col">user_start_date</th>
                <th scope="col">user_end_date</th>
                -->
                <th scope="col">用户名</th>
                <th scope="col">是否在线</th>
                <!-- <th scope="col">user_enable</th> -->
                <!-- <th scope="col">user_start_date</th> -->
                <!-- <th scope="col">user_end_date</th> --> 

              </tr>
            </thead>
            <tbody>
               {% if users %}
               {% for user in users%}
               <tr>
                <!--  <td><label><input name="s_option" value={{ user.user_id }} type="checkbox">  </label> </td> 复选框-->
                {% if  user.user_online  %}
                       <td>{{ user.user_id }}<pr style="color: red;">  Online</pr></td>
                {% else %}
                       <td >{{ user.user_id }}</td>
                {% endif %}
                <td>{{ user.user_online }}</td>
                <!--
                <td>{{ user.user_enable }}</td>
                <td>{{ user.user_start_date }}</td>
                <td>{{ user.user_end_date }}</td>
                -->
              </tr>
               {% endfor  %}
               {% endif %}

            </tbody>
          </table>
      </div>
    </div>
  </div>
  <br />
   <div class="container-sm">
    <div class="collapse multi-collapse" id="multiCollapseExample2">
    <form action="#" method="post">
    <input type="date" name="getdate" >
    {{ form.hidden_tag() }}
    {{ form.submit}}
   </form>
   <p>选择日期提交后会刷新整个页面,需要重新点击[连接日志]按钮</p>
        <table class="table table-striped">
            <thead class="thead-dark">
              <tr>
                <!--
                <th scope="col">user_id</th>
                <th scope="col">log_trusted_ip</th>
                <th scope="col">log_trusted_port</th>
                <th scope="col">log_remote_ip</th>
                <th scope="col">log_remote_port</th>
                <th scope="col">log_start_time</th>
                <th scope="col">log_end_time</th>
                -->
                <th scope="col">用户名</th>
                <th scope="col">登录ip</th>
                <th scope="col">登录端口</th>
                <th scope="col">登录远端ip</th>
                <th scope="col">登录远端端口</th>
                <th scope="col">用户登录时间</th>
                <th scope="col">用户退出时间</th>
              </tr>
            </thead>
            <tbody>
               {% if logs %}
               {% for log in logs %}
               <tr>
                <td> {{ log.user_id }} </td>
                <td> {{ log.log_trusted_ip }} </td>
                <td> {{ log.log_trusted_port }} </td>
                <td> {{ log.log_remote_ip }} </td>
                <td> {{ log.log_remote_port }} </td>
                <td> {{ log.log_start_time }} </td>
                <td> {{ log.log_end_time }} </td>
              </tr>
               {% endfor  %} 
               {% endif %}

            </tbody>
          </table>
    </div>
  </div>
{% endblock %}
